# Activity 6 Requirements Checklist

## ✅ Part A: Brand Management – CRUD operations

### Admin (`admin/brand.php`)

- [x] **Check if user is logged in** ✅ Implemented (lines 6-9)
- [x] **Check if user is admin** ✅ Implemented (lines 11-15)
- [x] **Redirect to login if not admin** ✅ Implemented

- [x] **RETRIEVE: Display brands organized by categories** ✅
  - Brands displayed in table with Category column (line 195-218)
  - Only brands created by logged-in user (via `fetch_brand_action.php`)

- [x] **CREATE: Form with brand name and category selection** ✅
  - Brand name input field (line 141)
  - Category dropdown populated from categories (line 179-181)
  - ID autogenerated (database AUTO_INCREMENT)
  - Brand + category combination must be unique ✅ (enforced in `brand_class.php::nameExistsInCategory()`)

- [x] **UPDATE: Collect updated values (name editable, ID not)** ✅
  - Edit form with hidden ID field (line 163)
  - Only name and category editable (line 164-181)
  - ID not editable ✅

- [x] **DELETE: Delete a brand** ✅
  - Delete button in table (implemented in `brand.js`)

### Actions/Functions

- [x] **`fetch_brand_action.php`** ✅
  - Fetches brands created by logged-in user
  - Returns JSON response

- [x] **`add_brand_action.php`** ✅
  - Receives form data
  - Invokes `add_brand_ctr()` from controller
  - Returns message

- [x] **`update_brand_action.php`** ✅
  - Receives form data (id, name, category_id)
  - Invokes controller update method
  - Returns message

- [x] **`delete_brand_action.php`** ✅
  - Receives ID
  - Invokes controller delete method
  - Returns message

### Classes/Models

- [x] **`brand_class.php`** ✅
  - Extends database connection ✅
  - `create()` - add brand ✅
  - `update()` - edit brand ✅
  - `delete()` - delete brand ✅
  - `getAll()` - get brand ✅
  - `getById()` - get single brand ✅
  - `nameExistsInCategory()` - check uniqueness ✅

### Controllers

- [x] **`brand_controller.php`** ✅
  - Creates instance of Brand class ✅
  - **`add_brand_ctr($kwargs)` method** ✅ (line 12)
  - Invokes `brand_class::create()` ✅

### JS

- [x] **`public/js/brand.js`** ✅
  - `validateBrandName()` - validates brand information (type, length, characters) ✅
  - `loadBrands()` - async invokes `fetch_brand_action.php` ✅
  - `addBrandForm` listener - async invokes `add_brand_action.php` ✅
  - `updateBrandForm` listener - async invokes `update_brand_action.php` ✅
  - `deleteBrand()` - async invokes `delete_brand_action.php` ✅
  - `showModal()` - pop-up/modal notifications ✅

### `index.php`

- [x] **Menu updated** ✅
  - Not logged in: Register | Login ✅
  - Logged in + admin: **Logout | Category | Brand** ✅ (line 118-120)
  - Logged in + not admin: Logout ✅

---

## ✅ Part B: Product Management – Add & Edit

### Admin (`admin/perfume.php` - used as product.php)

- [x] **Check if user is logged in** ✅ Implemented (lines 6-9)
- [x] **Check if user is admin** ✅ Implemented (lines 11-15)
- [x] **Redirect to login if not authorized** ✅ Implemented

- [x] **RETRIEVE: Display products organized by categories and brands** ✅
  - Products table with Category column (line 126)
  - Modern, clean, intuitive display ✅

- [x] **CREATE/UPDATE: Form with all required fields** ✅
  - ✅ **Product ID autogenerated** (hidden field, line 161, database AUTO_INCREMENT)
  - ✅ **Product Category dropdown** (value = cat_id, display = cat_name) (line 176)
  - ✅ **Product Brand dropdown** (value = brand_id, display = brand_name) (line 185)
  - ✅ **Product Title** (line 167)
  - ✅ **Product Price** (line 196)
  - ✅ **Product Description** (textarea, line 212)
  - ✅ **Product Image upload** (file input, line 246) + Image URL alternative (line 256)
  - ✅ **Product Keyword** (line 228)

### Actions/Functions

- [x] **`add_product_action.php`** ✅
  - Receives form data
  - Invokes `add_product_ctr()` from controller
  - Returns message

- [x] **`update_product_action.php`** ✅
  - Receives form data
  - Invokes controller update method
  - Returns message

- [x] **`upload_product_image_action.php`** ✅
  - Constructs file path: `uploads/u{user_id}/p{product_id}/image_name.png` ✅ (lines 64-99)
  - Stores image in uploads/ folder only ✅ (lines 55-60)
  - Verifies uploads/ folder exists ✅ (lines 55-60)
  - Rejects attempts to upload elsewhere ✅ (lines 100-106)
  - Returns resolved file path ✅

### Classes/Models

- [x] **`classes/perfume_class.php`** ✅ (used as product_class.php)
  - Extends database connection ✅
  - `create()` - add product ✅
  - `update()` - edit product ✅
  - `getAll()` - get all products ✅
  - `getById()` - get single product ✅

### Controllers

- [x] **`controllers/perfume_controller.php`** ✅ (used as product_controller.php)
  - Creates instance of Perfume class ✅
  - **`add_product_ctr($kwargs)` method** ✅ (line 12)
  - Invokes `perfume_class::create()` ✅

### Images

- [x] **`uploads/` folder** ✅
  - Created and verified ✅
  - Directory structure: `uploads/u{user_id}/p{product_id}/image_name.png` ✅
  - Subfolders created programmatically inside uploads/ ✅

### JS

- [x] **`public/js/perfume.js`** ✅
  - `validateProduct()` - validates product information (type checks, required fields) ✅ (lines 317-364)
  - `uploadProductImage()` - async uploads image file ✅ (lines 291-314)
  - Form listener - async invokes `add_product_action.php` or `update_product_action.php` ✅ (lines 367-466)
  - `showModal()` - pop-up/modal notifications ✅ (lines 469-487)
  - `loadBrandsForDropdown()` - loads brands filtered by category ✅ (lines 163-210)

### `index.php`

- [x] **Menu updated** ✅
  - Not logged in: Register | Login ✅
  - Logged in + admin: **Logout | Category | Brand | Add Product** ✅ (line 118-121)
  - Logged in + not admin: Logout ✅

---

## Summary

✅ **ALL Activity 6 Requirements Have Been Met!**

### Part A (Brand Management): ✅ Complete
- All CRUD operations implemented
- Admin checks, redirects, and validation in place
- All action files, classes, controllers, and JS implemented
- Menu updated correctly

### Part B (Product Management): ✅ Complete
- CREATE and UPDATE operations implemented
- All required fields in form
- Image upload with proper folder structure
- All action files, classes, controllers, and JS implemented
- Menu updated correctly

**Note:** `product.php` requirement fulfilled by `admin/perfume.php` which serves as the product management page.

